---
import SocialLinks from "@/components/ui/SocialLinks.jsx";
import MenuButton from "@/components/ui/MenuButton.jsx";
---

<header id="main-header" class="font-bold text-lg">
    <div class="container mx-auto flex justify-between items-center py-4 px-4 text-[var(--clr-text-secundary)]">
        
        <a href="/">
            <span>
                {"<"}
                <span class="text-[var(--clr-accent)]">Guijosa</span>
                {"/>"}
            </span>
        </a>

        <nav class="hidden md:flex items-center gap-8">
            <a href="#about" class="hover:text-[var(--clr-accent)] transition-colors">About</a>
            <a href="#skills" class="hover:text-[var(--clr-accent)] transition-colors">Skills</a>
            <a href="#projects" class="hover:text-[var(--clr-accent)] transition-colors">Projects</a>
            <a href="#contact" class="hover:text-[var(--clr-accent)] transition-colors">Contact</a>
        </nav>

        <div class="hidden md:block">
            <SocialLinks client:idle />
        </div>

        <MenuButton client:load onClick={() => {
            const mobileMenu = document.querySelector("#mobile-menu");
            if (mobileMenu) {
                mobileMenu.classList.toggle("hidden");
            }
        }} />

    </div>

    <div id="mobile-menu" class="hidden md:hidden absolute top-0 left-0 w-full h-screen bg-[var(--clr-dark-space)] z-40">
        <nav class="flex flex-col items-center justify-center h-full gap-10 text-2xl">
            <a href="#about" class="hover:text-[var(--clr-accent)]">About</a>
            <a href="#skills" class="hover:text-[var(--clr-accent)]">Skills</a>
            <a href="#projects" class="hover:text-[var(--clr-accent)]">Projects</a>
            <a href="#contact" class="hover:text-[var(--clr-accent)]">Contact</a>
            <div class="mt-8" id="social-links-mobile">
                <SocialLinks client:idle />
            </div>
        </nav>
    </div>
</header>

<script>
    const menuButton = document.querySelector("header button.z-50");
    const mobileMenu = document.querySelector("#mobile-menu");

    if (menuButton && mobileMenu) {
        menuButton.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });
    }

    const header = document.querySelector("#main-header");

    if (header) {
        const handleScroll = () => {
            if (window.scrollY > 10) {
                header.classList.add("scrolled");
            } else {
                header.classList.remove("scrolled");
            }
        };

        window.addEventListener("scroll", handleScroll);
    }
</script>

<style>
    header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 10;
        background-color: rgba(var(--clr-dark-space), 0.5);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-bottom: 1px solid transparent;
        transition: border-color 0.3s ease-in-out;
    }

    header.scrolled {
        border-bottom-color: var(--clr-accent-transparent);
    }

    #mobile-menu nav a{
        color: var(--clr-text-secundary);
        transition: color 0.3s ease-in-out;
    }

    #mobile-menu nav a:hover {
        color: var(--clr-accent);
    }

    #social-links-mobile{
        color: var(--clr-text-secundary);
    }
</style>
